# wiki.js ì„¤ì¹˜

1. ë„ì»¤ì™€ ì»¨í…Œì´ë„ˆëŠ” ë¬´ì—‡ì¸ê°€ https://m.blog.naver.com/complusblog/220980996544
1. ê°€ì¥ ê°•ë ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì˜¤í”ˆì†ŒìŠ¤ Wiki ì†Œí”„íŠ¸ì›¨ì–´ https://js.wiki

## 1. Windows ì•± ì„¤ì¹˜

### ê¸°ë³¸ ë„êµ¬

1. `7zip` ì••ì¶• í”„ë¡œê·¸ë¨ â¡ï¸ https://www.7-zip.org/ â¡ï¸ Download  .exe  64-bit x64  1.5 MB
1. `Git` ì—ì„œ `rsync` ëª…ë ¹ì„ ì“°ê¸° ìœ„í•´ ì¶”ê°€í•˜ëŠ” `usr` í´ë”ì™€, ê°€ë…ì„± ë†’ì€ `D2Coding` í°íŠ¸ â¡ï¸ [ ë‹¤ìš´ë¡œë“œ ](/4winapp/4git-usr-d2coding.7z)
1.  "ìœˆë„ìš°ë¥¼ ìœ„í•œ Git íŒ¨í‚¤ì§€" ë¥¼ ì„¤ì¹˜í•˜ëŠ” ì‹¤í–‰íŒŒì¼ â¡ï¸ https://git-scm.com/download/win â¡ï¸ 64-bit Git for Windows Setup
âš¡ `Git` ì€ ë²„ì „ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í•˜ë‚˜ë¡œ ë„ë¦¬ ì“°ì´ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.
âš¡ `Git-Bash` ëŠ” "ìœˆë„ìš°ë¥¼ ìœ„í•œ Git íŒ¨í‚¤ì§€" ì— í¬í•¨ë¼ ìˆëŠ” Bash ì…€. Bash ì…¸ì€, ìœ ë‹‰ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì“°ëŠ” ì…¸. ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ íŒŒì¼ ê´€ë¦¬, í”„ë¡œê·¸ë¨ ì‹¤í–‰ ë“±ì„ ëª…ë ¹í•œë‹¤.
1. BraveBrowserSetup-.exe ë¸Œë¼ìš°ì € https://try.bravesoftware.com/ â¡ï¸ Download for free
âš¡ Chromeì—ì„œ Braveë¡œ ì „í™˜í•´ì•¼ í•˜ëŠ” ì´ìœ  https://requestly.io/blog/switch-to-brave-from-chrome
1. `WinSCP` ëŠ” Windows í™˜ê²½ì—ì„œ `SFTP, FTP, SSH` ë“±ì˜ í”„ë¡œí† ì½œë¡œ íŒŒì¼ì„ ì „ì†¡í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ì´ë‹¤ â¡ï¸ https://winscp.net/eng/download.php â¡ï¸ ì•„ë˜ìª½ì—ì„œ (` DOWNLOAD WINSCP 6.1.1 (11 MB) `) ë²„íŠ¼ì„ í´ë¦­.

### ê°œë°œ ë„êµ¬

1. ìë°” ê°œë°œìš© íŒ¨í‚¤ì§€ íŒŒì¼ https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html â¡ï¸ Windows x64 Installer â¡ï¸ `jdk-17_windows-x64_bin.exe` ë‹¤ìš´ë¡œë“œ ë° ì‹¤í–‰
2. ë‹¤ìŒìœ¼ë¡œ `ideaIC` ë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ ì´ˆê¸°ì‘ì—…ì„ ìœ„í•´, `Git-bash` ë„ìš°ê³ , ë‹¤ìš´ë¡œë“œ í´ë” ì•ˆì— `bada` í´ë”ë¥¼ ë§Œë“¤ê³ , ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ìš´ë°›ëŠ”ë‹¤.

```
cd ~/Downloads ; mkdir bada ; cd ~/Downloads/bada
git clone https://github.com/selimatasoy/kotlin-ktor-rest-api.git
```

ë˜ëŠ”, ì € í´ë”ë¥¼ `kotlin-ktor-rest-api.7z` ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë¯¸ë¦¬ ì••ì¶•í•´ ë†“ê³ ,

```
7zr.exe a kotlin-ktor-rest-api.7z kotlin-ktor-rest-api
```

ì´ ì‘ì—…ì„ í•  ë•Œë§ˆë‹¤ ì••ì¶•ì„ í’€ì–´ì¤€ë‹¤.

```
7zr.exe x kotlin-ktor-rest-api.7z
```

3. `IntelliJ IDEA`ëŠ” JetBrains ì—ì„œ ê°œë°œí•œ ìë°”ë¥¼ í¬í•¨í•œ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ìœ„í•œ í†µí•© ê°œë°œ í™˜ê²½(IDE) ì´ë‹¤.
https://www.jetbrains.com/idea/download/download-thanks.html?platform=windows&code=IIC â¡ï¸ IntelliJ IDEA Community Edition ë¬´ë£Œ ë²„ì „
4. Postman ì€ APIë¥¼ êµ¬ì¶•í•˜ê³  ì‚¬ìš©í•˜ê¸° ìœ„í•œ API í”Œë«í¼ ì´ë‹¤. (`A`:ì• í”Œë¦¬ì¼€ì´ì…˜ `P`:í”„ë¡œê·¸ë¨ `I`:ì¸í„°í˜ì´ìŠ¤)
https://www.postman.com/downloads/ â¡ï¸ Windows 64bit â¡ï¸ https://dl.pstmn.io/download/latest/win64
https://blog.wishket.com/api%EB%9E%80-%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85-%EA%B7%B8%EB%A6%B0%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8/ ğŸ‘€
APIë¥¼ ë³¸ê²©ì ìœ¼ë¡œ ì•Œì•„ë³´ê¸° ì „ì—, ë¹„ìœ ë¥¼ ë“¤ì–´ ì‰½ê²Œ ì„¤ëª…ì„ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ë©‹ì§„ ë ˆìŠ¤í† ë‘ì— ìˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. ì ì›ì´ ê°€ì ¸ë‹¤ì¤€ ë©”ë‰´íŒì„ ë³´ë©´ì„œ ë¨¹ìŒì§ìŠ¤ëŸ¬ìš´ ìŠ¤í…Œì´í¬ë¥¼ ê³ ë¥´ë©´, ì ì›ì´ ì£¼ë¬¸ì„ ë°›ì•„ ìš”ë¦¬ì‚¬ì— ìš”ì²­ì„ í•  í…ë°ìš”. ê·¸ëŸ¬ë©´ ìš”ë¦¬ì‚¬ëŠ” ì •ì„±ê» ìŠ¤í…Œì´í¬ë¥¼ ë§Œë“¤ì–´ ì ì›ì—ê²Œ ì£¼ê³ , ì—¬ëŸ¬ë¶„ì€ ì ì›ì´ ê°€ì ¸ë‹¤ì¤€ ë§›ìˆëŠ” ìŒì‹ì„ ë¨¹ì„ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
ì—¬ê¸°ì„œ ì ì›ì˜ ì—­í• ì„ í•œ ë²ˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì ì›ì€ ì†ë‹˜ì—ê²Œ ë©”ë‰´ë¥¼ ì•Œë ¤ì£¼ê³ , ì£¼ë°©ì— ì£¼ë¬¸ë°›ì€ ìš”ë¦¬ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. ê·¸ë‹¤ìŒ ì£¼ë°©ì—ì„œ ì™„ì„±ëœ ìš”ë¦¬ë¥¼ ì†ë‹˜ê»˜ ë‹¤ì‹œ ì „ë‹¬í•˜ì§€ìš”. APIëŠ” ì ì›ê³¼ ê°™ì€ ì—­í• ì„ í•©ë‹ˆë‹¤.
APIëŠ” ì†ë‹˜(í”„ë¡œê·¸ë¨)ì´ ì£¼ë¬¸í•  ìˆ˜ ìˆê²Œ ë©”ë‰´(ëª…ë ¹ ëª©ë¡)ë¥¼ ì •ë¦¬í•˜ê³ , ì£¼ë¬¸(ëª…ë ¹)ì„ ë°›ìœ¼ë©´ ìš”ë¦¬ì‚¬(ì‘ìš©í”„ë¡œê·¸ë¨)ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ìš”ì²­ëœ ë©”ë‰´(ëª…ë ¹ì— ëŒ€í•œ ê°’)ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
ì‰½ê²Œ ë§í•´, APIëŠ” í”„ë¡œê·¸ë¨ë“¤ì´ ì„œë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê²ƒì„ ë„ì™€ì£¼ëŠ” ë§¤ê°œì²´ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. GIMP = GNU Image Manipulation Program (ê·¸ëˆ„ ì´ë¯¸ì§€ ì²˜ë¦¬ í”„ë¡œê·¸ë¨)
https://www.gimp.org/downloads/ GIMP for Windows â¡ï¸ Download GIMP 2.10.34 directly â¡ï¸ https://download.gimp.org/gimp/v2.10/windows/gimp-2.10.34-setup.exe

6. Windows ì˜ Git-Bash ì—ì„œ í•œë²ˆì— ì„¤ì¹˜í•˜ê¸° ìœ„í•œ BAT ìŠ¤í¬ë¦½íŠ¸.
```
type echo-run-chrome.txt
set /p str=  ---- press Enter ---- : 
7zr.exe x kotlin-ktor-rest-api.7z
start jdk-17_windows-x64_bin.exe
ChromeSetup.exe
start 7z2301-x64.exe
BraveBrowserSetup-DWS000.exe
start Git-2.41.0-64-bit.exe
ideaIC-2023.1.3.exe
start mysql-installer-web-community-8.0.33.0.msi
start gimp-2.10.34-setup.exe
Postman-win64-Setup.exe
```

## 1. ë„ì»¤ ì„¤ì¹˜í•˜ê¸°

0. ì‹œìŠ¤í…œì„ ìµœì‹ ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.
```
sudo dnf -y update
```

1. Fedora ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€í•œ ë‹¤ìŒì´ë¼ì•¼ docker ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.
```
sudo dnf -y install dnf-plugins-core
sudo tee /etc/yum.repos.d/docker-ce.repo << EOF
[docker-ce-stable]
name=Docker CE Stable - \$basearch
baseurl=https://download.docker.com/linux/fedora/36/\$basearch/stable
enabled=1
gpgcheck=1
gpgkey=https://download.docker.com/linux/fedora/gpg
EOF
echo "#-- (2) ì¶œì²˜: https://computingforgeeks.com/how-to-install-docker-on-fedora/ --> Fedora ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€í•©ë‹ˆë‹¤."
```

2. Docker CE ë¥¼ Fedora ì— ì„¤ì¹˜í•œë‹¤.
```
sudo dnf makecache
sudo dnf -y install docker-ce docker-ce-cli containerd.io
sudo systemctl enable --now docker
```
ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.
```
sudo systemctl status docker
sudo docker version
```

sudo ë¥¼ ì“°ì§€ ì•Šê³ ë„ ì²˜ë¦¬í† ë¡ í•˜ê±°ë‚˜ ì„¤ì¹˜í™•ì¸ì„ ìœ„í•´ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìƒëµ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸.
```
sudo usermod -aG docker $(whoami) ; newgrp docker ; echo "#-- (4-1) Docker ê·¸ë£¹ì€ ë§Œë“¤ì—ˆì§€ë§Œ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ì§€ëŠ” ì•Šì•˜ìœ¼ë©°, sudo ì—†ì´ docker ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´, ì´ ê·¸ë£¹ì— ì‚¬ìš©ìë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤."
sudo docker pull alpine ; echo "#-- (4-2) ì„¤ì¹˜ í™•ì¸ì„ ìœ„í•´, í…ŒìŠ¤íŠ¸ ë„ì»¤ë¥¼ ë‹¤ìš´ë¡œë“œí•´ ë´…ë‹ˆë‹¤."
sudo docker run -it --rm alpine /bin/sh ; echo "#-- (4-3) í™•ì¸ì„ ìœ„í•´ 'apk update' ì™€ 'exit' ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
```

## 2. ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ë¹Œë“œí•˜ê¸°

1. ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸°
2. í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³  ì„¤ì •íŒŒì¼ ë§Œë“¤ê¸°
3. ë„ì»¤ ì»´í¬ì¦ˆ (ë¹Œë“œ + ì‹¤í–‰) í•˜ê¸°
4. ë¸Œë¼ìš°ì €ì—ì„œ (ì£¼ì†Œ:í¬íŠ¸ë²ˆí˜¸) ì…ë ¥
5. ì²«ë²ˆì§¸ ë“±ë¡ì‘ì—…

ì‘ì—…ì˜ í¸ì˜ë¥¼ ìœ„í•´ í„°ë¯¸ë„ì—ì„œ ì…ë ¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤
.

### 1. ì‘ì—…ì— í•„ìš”í•œ ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸°

wiki.js ë¥¼ ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í¬ìŠ¤íŠ¸ê·¸ë ˆìŠ¤ (postgres DB) ë¥¼ ì„ íƒí–ˆìœ¼ë¯€ë¡œ, ì´ê²ƒì„ ë³´ê´€í•  ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³ , wiki.js ì„¤ì •ì„ ìœ„í•œ íŒŒì¼ì„ ë³´ê´€í•  ë””ë ‰í† ë¦¬ë„ ë§Œë“ ë‹¤.
```
cat <<__EOF__
---------------------------------


+---+
|   | 1. ì‘ì—…ì— í•„ìš”í•œ ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸°
+---+

__EOF__

docker_folder=/home/docker
pgsql_folder=${docker_folder}/pgsql
wiki_conf_folder=${docker_folder}/wiki_conf

p_made="x"
if [ ! -d ${pgsql_folder} ]; then
	sudo mkdir -p ${pgsql_folder}
	sudo chcon -R system_u:object_r:container_file_t:s0 ${pgsql_folder}
	sudo chown -R systemd-coredump:ssh_keys ${pgsql_folder}
	p_made="o"
fi

w_made="x"
if [ ! -d ${wiki_conf_folder} ]; then
	sudo mkdir -p ${wiki_conf_folder}
	sudo chown -R ${USER}:${USER} ${wiki_conf_folder}
	w_made="o"
fi

if [ "x${p_made}" = "xx" ] || [ "x${w_made}" = "xx" ]; then
	cat <<__EOF__
!!!!> ë‹¤ìŒ ë””ë ‰í† ë¦¬ê°€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤.
$(sudo ls -l --color ${pgsql_folder})
$(sudo ls -l --color ${wiki_conf_folder})
$(sudo ls -l --color ${docker_folder})
!!!!> ì „ì— ì“°ë˜ ë””ë ‰í† ë¦¬ê°€ ë‚¨ì•„ìˆë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.
!!!!> í™•ì¸í›„ ì‚­ì œí•˜ê³  ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”.
!!!!> sudo rm -rf ${pgsql_folder} ${wiki_conf_folder}
__EOF__
	exit -1
fi
cat <<__EOF__
( 1 )---------------------------------
__EOF__
```

### 2. í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³  ì„¤ì •íŒŒì¼ ë§Œë“¤ê¸°
```
cat <<__EOF__
---------------------------------


+---+
|   | 2. í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³  ì„¤ì •íŒŒì¼ ë§Œë“¤ê¸°
+---+

----> port ë²ˆí˜¸ë¥¼ 9900 ì²˜ëŸ¼ ì…ë ¥í•˜ì„¸ìš”.
__EOF__

read port_no
if [ "x${port_no}" = "x" ]; then
	exit -1
fi
cat <<__EOF__
í¬íŠ¸ë²ˆí˜¸ = ${port_no}
----> press Enter:
__EOF__
read a

cd ${wiki_conf_folder}
cat > docker-compose.yml <<__EOF__
version: "3"
services:

  db:
    image: postgres:11-alpine
    environment:
      POSTGRES_USER: imwiki
      POSTGRES_PASSWORD: wikijsrocks
      POSTGRES_DB: wiki
    logging:
      driver: "none"
    restart: unless-stopped
    volumes:
      - ${pgsql_folder}:/var/lib/postgresql/data
    container_name:
      wikijsdb

  wiki:
    image: requarks/wiki:2
    depends_on:
      - db
    environment:
      DB_TYPE: postgres
      DB_HOST: db
      DB_PORT: 5432
      DB_USER: imwiki
      DB_PASS: wikijsrocks
      DB_NAME: wiki
    restart: unless-stopped
    ports:
      - "${port_no}:3000"
    container_name:
      wikijs
__EOF__
ls -l ${wiki_conf_folder}
cat <<__EOF__
( 2 )---------------------------------
__EOF__
```

### 3. ë„ì»¤ ì»´í¬ì¦ˆ `ë¹Œë“œ + ì‹¤í–‰` í•˜ê¸°
```
cat <<__EOF__
---------------------------------


+---+
|   | 3. ë„ì»¤ ì»´í¬ì¦ˆ `ë¹Œë“œ + ì‹¤í–‰` í•˜ê¸°
+---+

__EOF__

cd ${wiki_conf_folder}
sudo dnf -y install docker-compose

rpm -qi docker-compose
sudo docker ps -a

sudo docker-compose pull wiki
echo "#-- ë„ì»¤ ì»´í¬ì¦ˆ wiki ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤."

sudo docker-compose up --force-recreate &
echo "#-- ë¹Œë“œí•œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤."

sudo docker-compose ps -a
cat <<__EOF__
( 3 )---------------------------------
__EOF__
```

### 4. ë„ì»¤ì˜ ìœ„í‚¤ì„œë²„ê°€ ì‹œì‘ë˜ë©´, ë¸Œë¼ìš°ì €ì—ì„œ `ì£¼ì†Œ ë˜ëŠ” localhost:í¬íŠ¸ë²ˆí˜¸` ë¥¼ ì…ë ¥í•œë‹¤.

`localhost:í¬íŠ¸ë²ˆí˜¸`

### 5. ì²«ë²ˆì§¸ ë“±ë¡ì‘ì—…ì„ í•œë‹¤.
- id / passwd ì…ë ¥
id = ì´ë©”ì¼ ì£¼ì†Œ
passwd = ìœ„í‚¤ì„œë²„ì— ë¡œê·¸ì¸ í•˜ê¸°ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒˆë¡œ ë“±ë¡í•œë‹¤.
[ + CREATE HOME PAGE ] = í™ˆ í˜ì´ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ í´ë¦­í•œë‹¤.
ì € id ì™€ passwd ë¡œ ë¡œê·¸ì¸ì´ ëœë‹¤.
- í™ˆ í˜ì´ì§€ ë§Œë“¤ê¸°
ë¬¸ì„œí¸ì§‘ê¸°ë¡œ `Markdown` ì„ ì„ íƒí•œë‹¤.
`Title` ì œëª©ì€ í•œê¸€ë¡œ ì¨ë„ ë˜ë©°, "2022-11 ì¼ì§€" ë“±ìœ¼ë¡œ ì“´ë‹¤.
`Short Desc` ì„¤ëª…ì€ "ì‘ì„±ì¤‘" ë˜ëŠ” ê°„ë‹¨í•œ ì„¤ëª…ì„ ì“´ë‹¤.
`Path` íŒŒì¼ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ê²ƒì¸ë°, ì•ŒíŒŒë²³ìœ¼ë¡œ ì •í•´ì•¼ í•œë‹¤.
ì²˜ìŒì—ëŠ” "home" ìœ¼ë¡œ ê³ ì •ë¼ ìˆë‹¤.
`v ok` ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ í™ˆ í˜ì´ì§€ì˜ ì¡°ê±´ ì‘ì„±ì„ ëë‚¸ë‹¤.
ì²˜ìŒ ì‘ì„±í•œ í™”ë©´ì€ Path ê°€ /home ìœ¼ë¡œ ë˜ì–´ ìˆì–´ì„œ
`localhost:í¬íŠ¸ë²ˆí˜¸/en/home` ìœ¼ë¡œ ì§€ì •ì´ ëœë‹¤.

### 6. ì´í›„ë¡œ ì§„í–‰í•  ì‘ì—…
VirtualBox fedora38 (ìš©ë„: ê°€ìƒì‹œìŠ¤í…œì—ì„œ í™ˆí˜ì´ì§€ ìš´ì˜)
1. wiki.js
(1) wiki.js ì„¤ì¹˜
(2) wiki.js ì‘ì„±
(3) ë°ì´í„° ë°±ì—…
(4) ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•
1. WordPress
(1) wordpress ì„¤ì¹˜
(2) wordpress ì‘ì„±
(3) PhotoScape ì‚¬ìš©
(4) wordpress êµ¬ì¶•
1. ktor
(1) start.ktor.io ì‚¬ìš©
(2) Postman í…ŒìŠ¤íŠ¸
(3) ìƒ˜í”Œ-1 ì‹¤í–‰

# rclone ìœ¼ë¡œ êµ¬ê¸€ ë“œë¼ì´ë¸Œ ì‚¬ìš©í•˜ê¸°

1. êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ Fedora ì—ì„œ `ë°±ì—…ìš© í´ë¼ìš°ë“œ`ë¡œ ì“°ê¸° ìœ„í•´ì„œëŠ” google drive ë¥¼ ì—°ê²°í•˜ëŠ” ì´ë¦„ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
```
rclone config #-- (1) êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ fedora ì—ì„œ ì“°ê¸° ìœ„í•œ ì„¤ì •ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.
```

2. í™”ë©´ì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ì— í•„ìš”í•œ ëª…ë ¹ì–´ê°€ ë‚˜íƒ€ë‚œë‹¤.
```
No remotes found - make a new one
n) New remote
s) Set configuration password
q) Quit config
n/s/q>
```
3 `n` ì„ ì…ë ¥í•´ì„œ ìƒˆë¡œìš´ ì›ê²©ì¥ì†Œ (ë¦¬ëª¨íŠ¸) ë§Œë“¤ê¸°ë¥¼ ì‹œì‘í•œë‹¤.
```
n/s/q> n
      === (ìƒˆë¡œìš´ ë¦¬ëª¨íŠ¸ ë§Œë“¤ê¸°)
name>
```
4. êµ¬ê¸€ ë“œë¼ì´ë¸ŒëŠ” êµ¬ê¸€ `ì´ë©”ì¼ ê³„ì • í•˜ë‚˜ë‹¹ 1ê°œë§Œ` ì§€ì •ëœë‹¤. ê·¸ ë“œë¼ì´ë¸Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ë¦¬ëª¨íŠ¸ì˜ ì´ë¦„ì„ ì…ë ¥í•œë‹¤.
```
name> abcdefg
     ========= (rclone ì‚¬ìš©í•  ì´ë¦„. ì•ìœ¼ë¡œ ì´ ì´ë¦„ìœ¼ë¡œ ì—°ê²°í•˜ê²Œ ëœë‹¤.)
Option Storage.
Type of storage to configure.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value.
...
Storage>
```
5. `rclone` í”„ë¡œê·¸ë¨ì€ êµ¬ê¸€ ë“œë¼ì´ë¸Œ ë¿ ì•„ë‹ˆë¼ ë‹¤ë¥¸ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ë„ ì—°ê²°í• ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì–´ëŠ í´ë¼ìš°ë“œë¥¼  ì“¸ ê²ƒì¸ì§€ ì„ íƒí•´ì•¼ í•œë‹¤. ì—¬ê¸°ì„œëŠ” êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ ì„ íƒí•œë‹¤.
ë‚˜ì—´ë˜ëŠ” ìˆ«ìë¥¼ ì…ë ¥í•´ë„ ë˜ê³ , ë¬¸ìë¥¼ ì…ë ¥í•´ë„ ëœë‹¤. ì—¬ê¸°ì„œëŠ” êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ ê°€ë¦¬í‚¤ëŠ” `drive` ë¥¼ ì…ë ¥í–ˆë‹¤.
```
Choose a number from below, or type in your own value.
...
16 / Google Drive
   \ "drive"
...
(ìŠ¤í† ë¦¬ì§€ ì¢…ë¥˜ê°€ 45ê°œë¡œ ìƒë‹¹íˆ ë§ë‹¤.)
...
Storage> drive
        ======= (Google Drive ë¡œ ì§€ì •)
Option client_id.
Google Application Client Id
Setting your own is recommended.
...
client_id> 
```
6. `client_id` ëŠ” ê¸°ë³¸ ê°’ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ ê·¸ëƒ¥ ```ì—”í„°```ë¥¼ ì¹œë‹¤.
```
client_id> 
          ---
Option client_secret.
OAuth Client Secret.
client_secret> 
              ---
Option scope.
Scope that rclone should use when requesting access from drive.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value.
 1 / Full access all files, excluding Application Data Folder.
...
scope>
```

7. scope ëŠ” `1` ë¡œ ì§€ì •í•œë‹¤.
```
scope> 1
      === (ì§€ì •)
root_folder_id> 
```

8. ì´í›„ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ ì§€ì •í•˜ê¸° ìœ„í•´ ê·¸ëƒ¥ `ì—”í„°`ë¥¼ ì¹œë‹¤.
```
Option root_folder_id.
ID of the root folder.
root_folder_id> 
               ---
Option service_account_file.
Service Account Credentials JSON file path.
service_account_file> 
                     ---
Edit advanced config?
y/n> 
    ---
Use auto config?
y/n> 
    --- (ë¸Œë¼ìš°ì €ê°€ ëœ¨ë©´,)
```

9. `auto config` ë‹¤ìŒì—ëŠ” í”„ë¡œê·¸ë¨ì´ ë¸Œë¼ìš°ì €ë¥¼ ë„ì›Œì„œ ë³¸ì¸ í™•ì¸ì„ í•œë‹¤.
Google ê³„ì •ìœ¼ë¡œ `ë¡œê·¸ì¸` >
`ê³„ì •ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  í•©ë‹ˆë‹¤` > emails `ì£¼ì†Œ` í™•ì¸í›„ [`ì·¨ì†Œ`] [`í—ˆìš©`] ì„ íƒ.
ëë‚´ë©´ ëœë‹¤)
```
Use auto config?
y/n> 
    ---
Configure this as a Shared Drive (Team Drive)?
y/n> 
    ---
y/e/d> 
      ---
Current remotes:

Name                 Type
====                 ====
abcdefg              drive
```

10. ë¦¬ëª¨íŠ¸ ì´ë¦„ì´ ìœ„ì™€ ê°™ì´ ë“±ë¡ë˜ì—ˆë¯€ë¯€ë¡œ ì´ ì‘ì—…ì„ ëë‚¸ë‹¤.
```
e/n/d/r/c/s/q> q
              ===
```

# wiki.js ë°ì´í„°ì˜ ë°±ì—…ê³¼ ë¦¬ìŠ¤í† ì–´

## wiki.js ë‹¨ìˆœë°±ì—… ë³´ê´€í•˜ê¸°

```
DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
#-
sudo docker ps -a ; sudo docker stop wikijs ; echo "#-- (1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
LOCAL_FOLDER="/home/backup/simple_wikidb" #- ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ
if [ ! -d ${LOCAL_FOLDER} ]; then
    sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER}
fi
this_y4m2=$(date +%Y)-$(date +%m) #- 2022-08
LOCAL_Y2M2=${LOCAL_FOLDER}/${this_y4m2}
if [ ! -d ${LOCAL_Y2M2} ]; then
    mkdir -p ${LOCAL_Y2M2} ; echo "#-- (2) ${LOCAL_Y2M2} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
ls -lR ${LOCAL_Y2M2} ; echo "#-- (3) ë³´ê´€ìš© ë¡œì»¬ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
REMOTE_FOLDER="simple_wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
REMOTE_Y2M2=${REMOTE_FOLDER}/${this_y4m2}
#-
ymd_hm=$(date +"%y%m%d%a-%H%M")
DB_sql7z=${DB_NAME}_${ymd_hm}_$(uname -n).sql.7z #- ì••ì¶•íŒŒì¼ ì´ë¦„
cat <<__EOF__
#-
#- DB ë°±ì—…
#-
#- (4) wili.js ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ---ë¹„ë°€ë²ˆí˜¸--- ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-
__EOF__
sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_Y2M2}/${DB_sql7z} -p ; echo "#-- (5) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ ë¡œì»¬ ë³´ê´€ì¥ì†Œì— ë°±ì—…í•©ë‹ˆë‹¤."
ls -lR ${LOCAL_Y2M2} ; echo "#-- (6) ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_Y2M2}/${DB_sql7z} ${RCLONE_NAME}:${REMOTE_Y2M2}/ ; echo "#-- (7) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ íŒŒì¼ì„ í´ë¼ìš°ë“œë¡œ ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_Y2M2} ; echo "#-- (8) í´ë¼ìš°ë“œ í´ë”ì…ë‹ˆë‹¤."
#-
sudo docker start wikijs ; sudo docker ps -a ; echo "#-- (9) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."
```

## wiki.js í´ë¼ìš°ë“œì— ë°±ì—…í•˜ê¸°

```
sudo docker ps -a ; sudo docker stop wikijs ; echo "#-- (1-1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
#-
DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
LOCAL_FOLDER="/home/backup/wikidb" #- ë°±ì—…íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œì˜ ë””ë ‰í† ë¦¬ ì´ë¦„
REMOTE_FOLDER="wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
#-
this_year=$(date +%Y) #- 2022
this_wol=$(date +%m) #- 07
ymd_hm=$(date +"%y%m%d%a-%H%M")
pswd_ym=$(date +"%y%m")
yoil_number0to6=$(date +%u) #- ì¼0 ì›”1 í™”2 ìˆ˜3 ëª©4 ê¸ˆ5 í† 6
yoil_number1to7=$(( ${yoil_number0to6} + 1 )) #- 1 2 3 4 5 6 7
ju_beonho=$(date +%V) #- 1ë…„ì¤‘ ëª‡ë²ˆì§¸ ì£¼ì¸ì§€ í‘œì‹œ.
#- V: ì›”ìš”ì¼ë§ˆë‹¤ í•˜ë‚˜ì”© ì¦ê°€í•œë‹¤.
#- U: (1ì›”1ì¼ì´ ì¼ìš”ì¼ ì´ë©´ 01, ì•„ë‹ˆë©´ 00), ì¼ìš”ì¼ë§ˆë‹¤ í•˜ë‚˜ì”© ì¦ê°€í•œë‹¤.
#-
yoil_sql_7z=".${yoil_number1to7}yoil.sql.7z" #- ìš”ì¼ í‘œì‹œ
uname_n=$(uname -n)
YOIL_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${yoil_sql_7z}
this_wol_sql_7z=".${this_wol}wol.sql.7z" #- ì›” í‘œì‹œ
WOL_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${this_wol_sql_7z}
ju_beonho_sql_7z=".${ju_beonho}ju.sql.7z" #- 1ë…„ì¤‘ ëª‡ë²ˆì§¸ ì£¼ì¸ì§€ í‘œì‹œ
JU_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${ju_beonho_sql_7z}
#-
if [ ! -d ${LOCAL_FOLDER} ];then
	sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER} ; echo "#-- (1-2) ë§¤ì›” ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_FOLDER} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
LOCAL_THIS_YEAR=${LOCAL_FOLDER}/${this_year}
LOCAL_YOIL=${LOCAL_THIS_YEAR}/1_7yoil
if [ ! -d ${LOCAL_YOIL} ]; then
	mkdir -p ${LOCAL_YOIL} ; echo "#-- (1-3) ìµœê·¼ 1ì£¼ì¼ì¹˜ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_YOIL} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
LOCAL_JU=${LOCAL_THIS_YEAR}/01_53ju #- ë…„ë„ì˜ ju í´ë”ì—ëŠ” ë§¤ì£¼ ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•œë‹¤.
if [ ! -d ${LOCAL_JU} ]; then
	mkdir -p ${LOCAL_JU} ; echo "#-- (1-4) ë§¤ì£¼ ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_JU} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
#-
REMOTE_YEAR=${REMOTE_FOLDER}/${this_year} #- rclone ëª…ë ¹ìœ¼ë¡œ ë³´ë‚´ëŠ” ì›ê²© ì €ì¥ì†Œì˜ ë°ì´í„°ë² ì´ìŠ¤êµ¬ë¶„/ë…„ë„
REMOTE_YOIL=${REMOTE_YEAR}/1_7yoil #- ìµœê·¼ ìš”ì¼
REMOTE_JU=${REMOTE_YEAR}/01_53ju #- ì£¼ ì¼ë ¨ë²ˆí˜¸
ls -lR ${LOCAL_THIS_YEAR} ; echo "#-- (1-5) ${LOCAL_THIS_YEAR} ë³´ê´€ìš© --ë¡œì»¬-- ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
rm -f ${LOCAL_YOIL}/*${yoil_sql_7z} ; echo "#-- (1-6) < ${yoil_sql_7z} > ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
#-
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YOIL}/ | grep ${yoil_sql_7z} | awk '{print $2}') #- < ${yoil_sql_7z} > ì´ë¦„ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST" #- < ${yoil_sql_7z} > ì´ë¦„ì˜ í´ë¼ìš°ë“œ ë°±ì—…íŒŒì¼ì´ ìˆëŠ” ê²½ìš°,
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ // https://linuxhint.com/trim_string_bash/
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_YOIL}/${file_name} ; echo "#-- (1-7) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- DB ë¥¼ < ${yoil_sql_7z} > ì´ë¦„ìœ¼ë¡œ ì••ì¶•.
#-
#-- (1-8) wili.js ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ---ë¹„ë°€ë²ˆí˜¸--- ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-
__EOF__
sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_YOIL}/${YOIL_sql7z} -p ; echo "#-- (1-9) < ${yoil_sql_7z} > ì´ë¦„ì˜ --ë¡œì»¬-- ì— ì••ì¶•ë³´ê´€ í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_YOIL}/${YOIL_sql7z} ${RCLONE_NAME}:${REMOTE_YOIL}/ ; echo "#-- (1-10) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YOIL} ; echo "#-- (1-11) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
cat <<__EOF__
#-
#- ::${this_wol_sql_7z}:: ì§€ë‚œë°±ì—… ì‚­ì œ
#-
__EOF__
rm -f ${LOCAL_THIS_YEAR}/*${this_wol_sql_7z} ; echo "#-- (1-12) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YEAR}/ | grep ${this_wol_sql_7z} | awk '{print $2}') #- ::${this_wol_sql_7z}:: ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST"
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_YEAR}/${file_name} ; echo "#-- (1-13) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- ::${this_wol_sql_7z}:: ìœ¼ë¡œ ë³µì‚¬
#-
__EOF__
cp ${LOCAL_YOIL}/${YOIL_sql7z} ${LOCAL_THIS_YEAR}/${WOL_sql7z} ; echo "#-- (1-14) < ${yoil_sql_7z} > ì´ë¦„ì˜ íŒŒì¼ì„ ::${this_wol_sql_7z}:: ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ë¡œì»¬ì˜ ë…„ë„í´ë”ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_THIS_YEAR}/${WOL_sql7z} ${RCLONE_NAME}:${REMOTE_YEAR}/ ; echo "#-- (1-15) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YEAR} ; echo "#-- (1-16) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
cat <<__EOF__
#-
#- ( ${ju_beonho_sql_7z} ) ì´ë¦„ìœ¼ë¡œ ëœ ì§€ë‚œë°±ì—… ì‚­ì œ
#-
__EOF__
rm -f ${LOCAL_JU}/*${ju_beonho_sql_7z} ; echo "#-- (1-17) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_JU}/ | grep ${ju_beonho_sql_7z} | awk '{print \$2}') #- ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST"
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_JU}/${file_name} ; echo "#-- (1-18) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- ì˜¤ëŠ˜ì˜ ${ju_beonho_sql_7z} ì´ë¦„ìœ¼ë¡œ ë³µì‚¬
#-
__EOF__
cp ${LOCAL_YOIL}/${YOIL_sql7z} ${LOCAL_JU}/${JU_sql7z} ; echo "#-- (1-19) < ${yoil_sql_7z} > ì´ë¦„ì˜ íŒŒì¼ì„ ( ${ju_beonho_sql_7z} ) ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ë¡œì»¬ì˜ ( ${ju_beonho_sql_7z} ) í´ë”ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_JU}/${JU_sql7z} ${RCLONE_NAME}:${REMOTE_JU}/) ; echo "#-- (1-20) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
#-
ls -lR ${LOCAL_THIS_YEAR} ; echo "#-- (1-21) ${LOCAL_THIS_YEAR} ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_YEAR} ; echo "#-- (1-22) ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
#-
sudo docker start wikijs ; sudo docker ps -a ; echo "#-- (1-23) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."
```

## ì„œë²„ìš© simple_wiki.js-BACKUP.sh ìŠ¤í¬ë¦½íŠ¸.
```
#!/bin/sh

source ${HOME}/bin/color_base #-- 221027ëª©-1257 CMD_DIR CMD_NAME cmdRun cmdCont cmdYenter echoSeq 
MEMO="wiki.js ë°ì´í„°ë¥¼ google drive ì— ë°±ì—…"
cat <<__EOF__
${cMagenta}>>>>>>>>>>${cGreen} $0 ${cMagenta}||| ${cCyan}${MEMO} ${cMagenta}>>>>>>>>>>${cReset}
__EOF__
zz00logs_folder="${HOME}/zz00logs" ; if [ ! -d "${zz00logs_folder}" ]; then cmdRun "mkdir ${zz00logs_folder}" "ë¡œê·¸ í´ë”" ; fi
zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")__RUNNING_${CMD_NAME}" ; touch ${zz00log_name}
# ----


DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
#-
cmdRun "sudo docker ps -a ; sudo docker stop wikijs" "(1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
LOCAL_FOLDER="/home/backup/simple_wikidb" #- ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ
if [ ! -d ${LOCAL_FOLDER} ]; then
	cmdRun "sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER}" "(2) ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ í´ë”ë¥¼ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤."
fi
this_y4m2=$(date +%Y)-$(date +%m) #- 2022-08
LOCAL_Y2M2=${LOCAL_FOLDER}/${this_y4m2}
if [ ! -d ${LOCAL_Y2M2} ]; then
    cmdRun "mkdir -p ${LOCAL_Y2M2}" "(3) ${LOCAL_Y2M2} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
cmdRun "ls -lR ${LOCAL_Y2M2}" "(4) ë³´ê´€ìš© ë¡œì»¬ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
REMOTE_FOLDER="simple_wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
REMOTE_Y2M2=${REMOTE_FOLDER}/${this_y4m2}
#-
ymd_hm=$(date +"%y%m%d%a-%H%M")
DB_sql7z=${DB_NAME}_${ymd_hm}_$(uname -n).sql.7z #- ì••ì¶•íŒŒì¼ ì´ë¦„
cat <<__EOF__
${cMagenta}
#- DB ë°±ì—…

#- ${cRed}${DB_sql7z} ${cMagenta}ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ${cRed}----${cYellow}ë¹„ë°€ë²ˆí˜¸${cRed}----${cMagenta} ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
${cReset}
__EOF__
cmdRun "sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_Y2M2}/${DB_sql7z} -p" "(5) ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ${cRed}----${cYellow}ë¹„ë°€ë²ˆí˜¸${cRed}----${cCyan} ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
cmdRun "ls -lR ${LOCAL_Y2M2}" "(6) ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
cmdRun "/usr/bin/rclone copy ${LOCAL_Y2M2}/${DB_sql7z} ${RCLONE_NAME}:${REMOTE_Y2M2}/" "(7) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ íŒŒì¼ì„ í´ë¼ìš°ë“œë¡œ ë³µì‚¬í•©ë‹ˆë‹¤."
cmdRun "/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_Y2M2}" "(8) í´ë¼ìš°ë“œ í´ë”ì…ë‹ˆë‹¤."
#-
cmdRun "sudo docker start wikijs ; sudo docker ps -a" "(9) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."


# ----
rm -f ${zz00log_name} ; zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")..${CMD_NAME}" ; touch ${zz00log_name}
ls --color ${zz00logs_folder}
cat <<__EOF__
${cRed}<<<<<<<<<<${cBlue} $0 ${cRed}||| ${cMagenta}${MEMO} ${cRed}<<<<<<<<<<${cReset}
__EOF__
```

## ë°±ì—…í•œ .7z íŒŒì¼ì„ wiki.js ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë¦¬ìŠ¤í† ì–´ í•˜ê¸°

cat ~/bin/color_base 
```
#!/bin/sh

CMD_NAME=`basename $0` ; CMD_DIR=${0%/$CMD_NAME} ; if [ "x$CMD_DIR" == "x" ] || [ "x$CMD_DIR" == "x$CMD_NAME" ]; then CMD_DIR="." ; fi
cBlack=$(tput bold)$(tput setaf 0); cRed=$(tput bold)$(tput setaf 1); cGreen=$(tput bold)$(tput setaf 2); cYellow=$(tput bold)$(tput setaf 3); cBlue=$(tput bold)$(tput setaf 4); cMagenta=$(tput bold)$(tput setaf 5); cCyan=$(tput bold)$(tput setaf 6); cWhite=$(tput bold)$(tput setaf 7); cReset=$(tput bold)$(tput sgr0); cUp=$(tput cuu 2)

cmdRun () {
	echo "${cCyan}----> ${cYellow}$1 ${cGreen}#-- ${cBlue}$2${cReset}"; echo "$1" | sh
	echo "${cGreen}<---- ${cBlue}$1 ${cGreen}#-- ${cBlue}$2${cReset}"
}
cmdCont () {
	echo -e "${cCyan}----> ${cYellow}$1 ${cGreen}#-- ${cBlue}$2\n----> ${cMagenta}Enter ${cGreen}to continue${cReset}:"
	read a ; echo "${cUp}"; echo "$1" | sh
	echo "${cGreen}<---- ${cBlue}$1 ${cGreen}#-- ${cBlue}$2${cReset}"
}
ALL_INSTALL="n"
cmdYenter () {
	echo "${cCyan}----> ${cYellow}$1 ${cGreen}#-- ${cBlue}$2${cReset}"
	if [ "x${ALL_INSTALL}" = "xy" ]; then
		echo "$1" | sh ; echo "${cGreen}<---- ${cBlue}$1 ${cMagenta}#-- ${cBlue}$2${cReset}"
	else
		echo "${cCyan}----> ${cRed}press ${cCyan}'${cYellow}y${cCyan}'${cRed} or Enter${cReset}:"; read a; echo "${cUp}"
		if [ "x$a" = "xy" ]; then
			echo "${cRed}-OK-${cReset}"; echo "$1" | sh
			echo "${cGreen}<---- ${cBlue}$1 press 'y' or Enter: ${cMagenta}#-- ${cBlue}$2${cReset}"
		else
			echo "${cRed}[ ${cBlue}$1 ${cRed}] ${cMagenta}<--- ëª…ë ¹ì„ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.${cReset}"
		fi
	fi
}
eSq=0
eSqMsg=""
echoSeq () {
	if [ "x$1" = "x" ]; then
		echo "${cBlue}(${eSq}) ${eSqMsg}${cReset}" ; echo "${cBlue}#--${cReset}"
	else
		eSq=$(( ${eSq} + 1 ))
		echo "${cMagenta}(${eSq}) ${cCyan}$1${cReset}"
		eSqMsg=$1
	fi
}
cmdTTbegin () {
	echo "${cCyan}----> ${cRed}$1${cReset}"
}
cmdTTend () {
	echo "${cBlue}<---- ${cMagenta}$1${cReset}"
}
freesound_dir="${HOME}/bin/freesound"
ding_play () {
	if [ "x$PLAY_OK" = "xok" ]; then #-- play ì„¤ì¹˜ê°€ ëœ ê²½ìš°,
		if [ "x$1" = "x1" ]; then play -q ${freesound_dir}/play-1-pbong.wav & #-- 91926__tim-kahn__ding.wav & #---- x1=ë”©~
		else if [ "x$1" = "x2" ]; then play -q ${freesound_dir}/play-2-castanets.wav & #-- 411459__inspectorj__castanets-multi-a-h1.wav & #---- x2=ìºìŠ¤í„°ë„¤ì¸ ~
		else if [ "x$1" = "x3" ]; then play -q ${freesound_dir}/play-3-ddenng.wav & #-- 339816__inspectorj__hand-bells-f-single.wav & #---- x3=ë—…-
		else if [ "x$1" = "x4" ]; then play -q ${freesound_dir}/play-4-tiiill.wav & #-- 212541__misstickle__indian-bell-chime.wav & #---- x4=ë ì¼~
		else if [ "x$1" = "x5" ]; then play -q ${freesound_dir}/play-5-gguuuung.wav & #-- 411090__inspectorj__wind-chime-gamelan-gong-a.wav & #---- x5=ë°ì—ì—¥~~
		else play -q ${freesound_dir}/play-6-ddeeeng.wav & #-- 513865__wormletter__chime-c.wav & #---- x6=êµíšŒ ë…-
		fi ; fi ; fi ; fi ; fi
	else
		echo "${cRed}~~~ play-${1} ~~~${cReset}"
	fi
}
# ding_play 1 #-- 1=ë”©~ 2=ìºìŠ¤í„°ë„¤ì¸ ~ 3=ë—…- 4=ë ì¼~ 5=ë°ì—ì—¥~~ 6=êµíšŒ ë…-
# $PLAY_OK="ok" #-- ì¸ ê²½ìš°ë§Œ ì‚¬ìš©í• ìˆ˜ ìˆë‹¤.

change_special_char () {
	#-- " str_01 " == ë¹ˆì¹¸ì„ ë°‘ì¤„ë¡œ.
	local str_01=$(echo ${original_file_name} | sed 's/ /_/g')
	#-- " str_02 " == ëŒ€ë¬¸ìë¥¼ ì†Œë¬¸ìë¡œ.
	# https://varie.tistory.com/entry/Bash%EC%89%98%EC%97%90%EC%84%9C-%ED%8C%8C%EC%9D%BC%EB%AA%85-%EC%9D%BC%EA%B4%84-%EB%8C%80%EC%86%8C%EB%AC%B8%EC%9E%90-%EB%B3%80%ED%99%98
	local str_02=$(echo ${str_01,,})
	#-- ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë°”ê¿€ë•ŒëŠ”: str_02=$(echo ${str_01^^})
	#-- bash3.x ì¸ ê²½ìš°: str_02=$(echo ${str_01} | tr '[A-Z]' '[a-z]')
	#-- "str_03 " == íŠ¹ìˆ˜ë¬¸ì ì‚­ì œí•˜ê±°ë‚˜ ë³€ê²½
	new_name=$(echo ${str_02} | sed 's/(/./g' | sed 's/)/./g' | sed 's/;/./g' | sed 's/</./g' | sed 's/>/./g' | sed 's/\[/./g' | sed 's/\]/./g' | sed 's/\//./g' | sed 's/+/./g' | sed 's/,/./g')
}

#-- source ${HOME}/bin/color_base #-- 230524ìˆ˜ 0828 CMD_DIR CMD_NAME cmdRun cmdCont cmdYenter echoSeq cmdTTbegin cmdTTend ding_play change_special_char () <== original_file_name ==> new_name
```

cat restore_wikijs_from_backup_file.sh 
```
#!/bin/sh

source ${HOME}/bin/color_base #-- 221027ëª©-1257 CMD_DIR CMD_NAME cmdRun cmdCont cmdYenter echoSeq 
MEMO="ë°±ì—…íŒŒì¼ì„ wiki.js ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë¦¬ìŠ¤í† ì–´ í•˜ê¸°"
cat <<__EOF__
${cMagenta}>>>>>>>>>>${cGreen} $0 ${cMagenta}||| ${cCyan}${MEMO} ${cMagenta}>>>>>>>>>>${cReset}
__EOF__
# zz00logs_folder="${HOME}/zz00logs" ; if [ ! -d "${zz00logs_folder}" ]; then cmdRun "mkdir ${zz00logs_folder}" "ë¡œê·¸ í´ë”" ; fi
# zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")__RUNNING_${CMD_NAME}" ; touch ${zz00log_name}
# ----


if [ "x$1" != "x" ]; then
	db_sql_7z="$1"
else
	cat <<__EOF__
${cBlue}#-
#- ë¦¬ìŠ¤í† ì–´ í•  sql.7z íŒŒì¼ ìœ„ì¹˜ ë° ì´ë¦„ì„ [ /media/sf_Downloads/wiki_220906í™”-1802_proenpi4b.36ju.sql.7z ] ì²˜ëŸ¼ ì…ë ¥í•˜ì„¸ìš”.
#-${cReset}
__EOF__
	read db_sql_7z
fi
if [ "x${db_sql_7z}" = "x" ]; then
	cat <<__EOF__
${cBlue}# !
# ! wiki.js ë°ì´í„°ë² ì´ìŠ¤ì— ë¦¬ìŠ¤í† ì–´ í•˜ê¸° ìœ„í•œ ë°±ì—…íŒŒì¼ ì´ë¦„ì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
# !${cReset}
__EOF__
	exit 1
fi
if [ ! -f "${db_sql_7z}" ]; then
	cat <<__EOF__
${cBlue}# !
# ! --${db_sql_7z}-- ë°±ì—…íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.
# !${cReset}
__EOF__
	exit 2
fi
cat <<__EOF__
${cBlue}#-
#- í˜„ì¬ ìš´ì˜ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
#-
#- ë§Œì¼ ${cRed}ë°±ì—…í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ ${cYellow}'n' ${cBlue}ì„ ëˆŒëŸ¬ ì£¼ì„¸ìš”.
#-${cReset}
__EOF__
read a ; echo "[ $a ]"
last_skip="backup_ok"
if [ "x$a" = 'xn' ]; then
	cat <<__EOF__
${cBlue}#-
#-
#-
#- ${cMagenta}!!!! ì£¼ì˜ !!!! ${cRed}í˜„ì¬ ìš´ì˜ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ìš´ë¡œë“œ + ë°±ì—… í•˜ì§€ì•Šê³ ${cBlue}, ì´ì „ì˜ ë°±ì—…ì„ ë¦¬ìŠ¤í† ì–´ í•©ë‹ˆë‹¤.
#-
#- ----> ë§ìœ¼ë©´ ${cYellow}'y' ${cBlue}ë¥¼ ëˆŒëŸ¬ ì£¼ì„¸ìš”.
#-${cReset}
__EOF__
	read a ; echo "[ $a ]"
	if [ "x$a" != "xy" ]; then
		exit 3
	fi
	last_skip="no_backup"
fi
# DB_NAME="wiki" #-- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
# LOGIN_PATH="wikipsql" #-- ë°ì´í„°ë² ì´ìŠ¤ ë¡œê·¸ì¸ íŒ¨ì“° ;;; pgsql ì´ë¼ì„œ ì“°ì§€ëŠ” ì•ŠìŒ.
# LOCAL_FOLDER="/home/backup/wiki.js" #-- ë°±ì—…íŒŒì¼ì„ ì¼ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œì˜ ë””ë ‰í† ë¦¬ ì´ë¦„
# REMOTE_FOLDER="wiki.js" #-- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
# RCLONE_NAME="yosgc" #-- rclone ì´ë¦„ yosjeongc
# DB_TYPE="pgsql"

LOCAL_FOLDER="/home/backup/wiki.js" #-- ë°±ì—…íŒŒì¼ì„ ì¼ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œì˜ ë””ë ‰í† ë¦¬ ì´ë¦„
dir_for_backup=${LOCAL_FOLDER}/last_backup_b4_restore #-- ë°±ì—…ì„ ë¦¬ìŠ¤í† ì–´ í•˜ê¸°ì „, í˜„ì¬DB ë°±ì—…í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œ
if [ ! -d ${dir_for_backup} ]; then
	cmdRun "sudo mkdir -p ${dir_for_backup} ; sudo chown ${USER}.${USER} ${dir_for_backup}" "#-- (1) í˜„ì¬ ìš´ì˜ì¤‘ì¸ DB ë¥¼ ë°±ì—…í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œ ë§Œë“­ë‹ˆë‹¤."
fi

cmdRun "sudo docker ps -a ; sudo docker stop wikijs ; sudo docker ps -a" "#-- (2) ë°±ì—…ì„ ìœ„í•´ wiki.js ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."

if [ "x${last_skip}" = "xbackup_ok" ]; then
	current_backup="last-wikijs-$(date +%y%m%d_%H%M%S)-$(uname -n).sql.7z"
	cat <<__EOF__
${cBlue}#-
#- (3) ì§€ì •í•œ ë°±ì—…íŒŒì¼ì„ DB ì„œë²„ì— ${cRed}ë¦¬ìŠ¤í† ì–´ í•˜ê¸°ì „ì—${cBlue}, í˜„ì¬ ìš´ì˜ì¤‘ì¸ DB ë¥¼ ë¨¼ì € ë°±ì—…í•©ë‹ˆë‹¤.
#-
#- ë°±ì—…ì‹œ ${cYellow}ë¹„ë°€ë²ˆí˜¸ ${cBlue}ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-${cReset}
__EOF__
	cmdRun "sudo docker exec wikijsdb pg_dumpall -U imwiki | time 7za a -si ${dir_for_backup}/${current_backup} -p" "#-- (4) í˜„ì¬ ìš´ì˜ì¤‘ì¸ DB ë¥¼ ë¨¼ì € ${dir_for_backup} ì— ë°±ì—…í•©ë‹ˆë‹¤."
fi
#cmdRun "sudo docker exec -it wikijsdb dropdb -U imwiki wiki" "#-- (5) ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤."
cmdRun "sudo docker exec  wikijsdb dropdb -U imwiki wiki" "#-- (5) ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤."
cmdRun "sudo docker exec  wikijsdb createdb -U imwiki wiki" "#-- (6) ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤."
cat <<__EOF__
${cBlue}#-
#-- (7) ì§€ì •í•œ ë°±ì—…íŒŒì¼ì„ ${cRed}DB ì„œë²„ì—${cBlue} ë¦¬ìŠ¤í† ì–´ í•©ë‹ˆë‹¤.
#-
#- ë°±ì—…ì‹œ ${cYellow}ë¹„ë°€ë²ˆí˜¸ ${cBlue}ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-${cReset}
__EOF__
cmdRun "time 7za x -so ${db_sql_7z} | sudo docker exec -i wikijsdb psql -U imwiki wiki" "#-- (8) ë°±ì—…íŒŒì¼ì„ DB ì— ë¦¬ìŠ¤í† ì–´ í•©ë‹ˆë‹¤."
cmdRun "sudo docker start wikijs ; sudo docker ps -a" "#-- (9) ì¤‘ë‹¨í–ˆë˜ wiki.js ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."


# ----
# rm -f ${zz00log_name} ; zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")..${CMD_NAME}" ; touch ${zz00log_name}
# ls --color ${zz00logs_folder}
cat <<__EOF__
${cRed}<<<<<<<<<<${cBlue} $0 ${cRed}||| ${cMagenta}${MEMO} ${cRed}<<<<<<<<<<${cReset}
__EOF__
```

# pgAdmin: PostgreSQL ë„êµ¬
(https://www.pgadmin.org/)

pgAdminì€ ì„¸ê³„ì—ì„œ ê°€ì¥ ë°œì „ëœ ì˜¤í”ˆ ì†ŒìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ì¸ PostgreSQLì„ ìœ„í•œ ê°€ì¥ ì¸ê¸° ìˆê³  ê¸°ëŠ¥ì´ í’ë¶€í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ê´€ë¦¬ ë° ê°œë°œ í”Œë«í¼ì…ë‹ˆë‹¤.
pgAdminì€ Linux, Unix, macOS ë° Windowsì—ì„œ PostgreSQL ë° EDB Advanced Server 10 ì´ìƒì„ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìš´ë¡œë“œ: (https://www.pgadmin.org/download/)

## RPM / Fedora ë²„ì „

rpm: (https://www.pgadmin.org/download/pgadmin-4-rpm/)

0. ì´ì „ì˜ pgAdmin ë¦¬í¬ì§€í† ë¦¬ íŒ¨í‚¤ì§€ê°€ ìˆì„ê²½ìš°, ì‚­ì œí•˜ë ¤ë©´.
```
sudo rpm -e pgadmin4-fedora-repo
```

1. ë¦¬í¬ì§€í† ë¦¬ ì„¤ì •í•˜ê¸°
```
sudo rpm -i https://ftp.postgresql.org/pub/pgadmin/pgadmin4/yum/pgadmin4-fedora-repo-2-1.noarch.rpm
```

2. pgAdmin ì„¤ì¹˜í•˜ê¸°

(2-1) ë°ìŠ¤í¬í†± ë° ì›¹ ëª¨ë“œ ëª¨ë‘ ì„¤ì¹˜í•˜ê¸°.
```
sudo yum install pgadmin4
```

(2-2) ë°ìŠ¤í¬í†± ëª¨ë“œ ì „ìš©ìœ¼ë¡œ ì„¤ì¹˜.
```
sudo yum install pgadmin4-desktop
```

(2-3) ì›¹ ëª¨ë“œ ì „ìš©ìœ¼ë¡œ ì„¤ì¹˜.
```
sudo yum install pgadmin4-web
```

(2-4) ì´ë•Œ pgadmin4 ë˜ëŠ” pgadmin4-web ì„ ì„¤ì¹˜í•œ ê²½ìš°.

ë‹¤ìŒì˜ ì›¹ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ì›¹ ëª¨ë“œì—ì„œ ì‹¤í–‰ë˜ë„ë¡ ì‹œìŠ¤í…œì„ êµ¬ì„±í•©ë‹ˆë‹¤.
```
sudo /usr/pgadmin4/bin/setup-web.sh
```

3. pgAdminì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
sudo yum upgrade pgadmin4
```

## Windows ë²„ì „

windows: (https://www.pgadmin.org/download/pgadmin-4-windows/)

[ 2023ë…„ 3ì›” 9ì¼ ë¦´ë¦¬ìŠ¤ ](https://www.postgresql.org/ftp/pgadmin/pgadmin4/v6.21/windows/)

1. ì•ˆë…•íˆì£¼ë¬´ì„¸ìš” ì–´í¼ì»·Tube êµ¬ë…ì 97.4ë§Œëª… ì¡°íšŒìˆ˜ 22ë§ŒíšŒ  3ì¼ ì „ ìŠ¤íƒ€ì›Œì¦ˆ ëª¨ë“  ì‹œë¦¬ì¦ˆëŠ” ë””ì¦ˆë‹ˆ í”ŒëŸ¬ìŠ¤ì—ì„œ ì‹œì²­ê°€ëŠ¥í•©ë‹ˆë‹¤!! https://www.youtube.com/watch?v=AUfAN2wNEMk




## 1. ë„ì»¤ ì„¤ì¹˜í•˜ê¸°

1. ì‹œìŠ¤í…œì„ ìµœì‹ ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.
```
sudo dnf -y update
```

2. Fedora ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€í•œ ë‹¤ìŒì´ë¼ì•¼ docker ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.
```
sudo dnf -y install dnf-plugins-core
sudo tee /etc/yum.repos.d/docker-ce.repo << EOF
[docker-ce-stable]
name=Docker CE Stable - \$basearch
baseurl=https://download.docker.com/linux/fedora/36/\$basearch/stable
enabled=1
gpgcheck=1
gpgkey=https://download.docker.com/linux/fedora/gpg
EOF
echo "#-- (2) ì¶œì²˜: https://computingforgeeks.com/how-to-install-docker-on-fedora/ --> Fedora ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€í•©ë‹ˆë‹¤."
```

3. Docker CE ë¥¼ Fedora ì— ì„¤ì¹˜í•œë‹¤.
```
sudo dnf makecache
sudo dnf -y install docker-ce docker-ce-cli containerd.io
sudo systemctl enable --now docker
```
3. ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.
```
sudo systemctl status docker
sudo docker version
```

sudo ë¥¼ ì“°ì§€ ì•Šê³ ë„ ì²˜ë¦¬í† ë¡ í•˜ê±°ë‚˜ ì„¤ì¹˜í™•ì¸ì„ ìœ„í•´ í…ŒìŠ¤íŠ¸í•˜ëŠ”
ìƒëµ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸.
```
sudo usermod -aG docker $(whoami) ; newgrp docker ; echo "#-- (4-1) Docker ê·¸ë£¹ì€ ë§Œë“¤ì—ˆì§€ë§Œ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ì§€ëŠ” ì•Šì•˜ìœ¼ë©°, sudo ì—†ì´ docker ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´, ì´ ê·¸ë£¹ì— ì‚¬ìš©ìë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤."
sudo docker pull alpine ; echo "#-- (4-2) ì„¤ì¹˜ í™•ì¸ì„ ìœ„í•´, í…ŒìŠ¤íŠ¸ ë„ì»¤ë¥¼ ë‹¤ìš´ë¡œë“œí•´ ë´…ë‹ˆë‹¤."
sudo docker run -it --rm alpine /bin/sh ; echo "#-- (4-3) í™•ì¸ì„ ìœ„í•´ 'apk update' ì™€ 'exit' ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
```

## 2. ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ë¹Œë“œí•˜ê¸°

ì‘ì—…ì˜ í¸ì˜ë¥¼ ìœ„í•´ í„°ë¯¸ë„ì—ì„œ ì…ë ¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤

### 1. ì‘ì—…ì— í•„ìš”í•œ ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸°
wiki.js ë¥¼ ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ `í¬ìŠ¤íŠ¸ê·¸ë ˆìŠ¤ (postgresql DB)` ë¥¼ ì„ íƒí–ˆìœ¼ë¯€ë¡œ, ì´ê²ƒì„ ë³´ê´€í•  ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³ , wiki.js ì„¤ì •ì„ ìœ„í•œ íŒŒì¼ì„ ë³´ê´€í•  ë””ë ‰í† ë¦¬ë„ ë§Œë“ ë‹¤.
```
cat <<__EOF__
---------------------------------


+---+
|   | 1. ì‘ì—…ì— í•„ìš”í•œ ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸°
+---+

__EOF__

docker_folder=/home/docker
pgsql_folder=${docker_folder}/pgsql
wiki_conf_folder=${docker_folder}/wiki_conf

p_made="x"
if [ ! -d ${pgsql_folder} ]; then
	sudo mkdir -p ${pgsql_folder}
	sudo chcon -R system_u:object_r:container_file_t:s0 ${pgsql_folder}
	sudo chown -R systemd-coredump:ssh_keys ${pgsql_folder}
	p_made="o"
fi

w_made="x"
if [ ! -d ${wiki_conf_folder} ]; then
	sudo mkdir -p ${wiki_conf_folder}
	sudo chown -R ${USER}:${USER} ${wiki_conf_folder}
	w_made="o"
fi

if [ "x${p_made}" = "xx" ] || [ "x${w_made}" = "xx" ]; then
	cat <<__EOF__
!!!!> ë‹¤ìŒ ë””ë ‰í† ë¦¬ê°€ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤.
$(sudo ls -l --color ${pgsql_folder})
$(sudo ls -l --color ${wiki_conf_folder})
$(sudo ls -l --color ${docker_folder})
!!!!> ì „ì— ì“°ë˜ ë””ë ‰í† ë¦¬ê°€ ë‚¨ì•„ìˆë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.
!!!!> í™•ì¸í›„ ì‚­ì œí•˜ê³  ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”.
!!!!> sudo rm -rf ${pgsql_folder} ${wiki_conf_folder}
__EOF__
	exit -1
fi
cat <<__EOF__
( 1 )---------------------------------
__EOF__
```

### 2. í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³  ì„¤ì •íŒŒì¼ ë§Œë“¤ê¸°
```
cat <<__EOF__
---------------------------------


+---+
|   | 2. í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§€ì •í•˜ê³  ì„¤ì •íŒŒì¼ ë§Œë“¤ê¸°
+---+

----> port ë²ˆí˜¸ë¥¼ 9900 ì²˜ëŸ¼ ì…ë ¥í•˜ì„¸ìš”.
__EOF__

read port_no
if [ "x${port_no}" = "x" ]; then
	exit -1
fi
cat <<__EOF__
í¬íŠ¸ë²ˆí˜¸ = ${port_no}
----> press Enter:
__EOF__
read a

cd ${wiki_conf_folder}
cat > docker-compose.yml <<__EOF__
version: "3"
services:

  db:
    image: postgres:11-alpine
    environment:
      POSTGRES_USER: imwiki
      POSTGRES_PASSWORD: wikijsrocks
      POSTGRES_DB: wiki
    logging:
      driver: "none"
    restart: unless-stopped
    volumes:
      - ${pgsql_folder}:/var/lib/postgresql/data
    container_name:
      wikijsdb

  wiki:
    image: requarks/wiki:2
    depends_on:
      - db
    environment:
      DB_TYPE: postgres
      DB_HOST: db
      DB_PORT: 5432
      DB_USER: imwiki
      DB_PASS: wikijsrocks
      DB_NAME: wiki
    restart: unless-stopped
    ports:
      - "${port_no}:3000"
    container_name:
      wikijs
__EOF__
ls -l ${wiki_conf_folder}
cat <<__EOF__
( 2 )---------------------------------
__EOF__
```

### 3. ë„ì»¤ ì»´í¬ì¦ˆ `ë¹Œë“œ + ì‹¤í–‰` í•˜ê¸°
```
cat <<__EOF__
---------------------------------


+---+
|   | 3. ë„ì»¤ ì»´í¬ì¦ˆ `ë¹Œë“œ + ì‹¤í–‰` í•˜ê¸°
+---+

__EOF__

cd ${wiki_conf_folder}
sudo dnf -y install docker-compose

rpm -qi docker-compose
sudo docker ps -a

sudo docker-compose pull wiki
echo "#-- ë„ì»¤ ì»´í¬ì¦ˆ wiki ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤."

sudo docker-compose up --force-recreate &
echo "#-- ë¹Œë“œí•œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤."

sudo docker-compose ps -a
cat <<__EOF__
( 3 )---------------------------------
__EOF__
```

### 4. ë„ì»¤ì˜ ìœ„í‚¤ì„œë²„ê°€ ì‹œì‘ë˜ë©´, ë¸Œë¼ìš°ì €ì—ì„œ `ì£¼ì†Œ ë˜ëŠ” localhost:í¬íŠ¸ë²ˆí˜¸` ë¥¼ ì…ë ¥í•œë‹¤.

`localhost:í¬íŠ¸ë²ˆí˜¸`

### 5. ì²«ë²ˆì§¸ ë“±ë¡ì‘ì—…ì„ í•œë‹¤.
- id / passwd ì…ë ¥
id = ì´ë©”ì¼ ì£¼ì†Œ
passwd = ìœ„í‚¤ì„œë²„ì— ë¡œê·¸ì¸ í•˜ê¸°ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒˆë¡œ ë“±ë¡í•œë‹¤.
[ + CREATE HOME PAGE ] = í™ˆ í˜ì´ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ í´ë¦­í•œë‹¤.
ì € id ì™€ passwd ë¡œ ë¡œê·¸ì¸ì´ ëœë‹¤.
- í™ˆ í˜ì´ì§€ ë§Œë“¤ê¸°
ë¬¸ì„œí¸ì§‘ê¸°ë¡œ `Markdown` ì„ ì„ íƒí•œë‹¤.
`Title` ì œëª©ì€ í•œê¸€ë¡œ ì¨ë„ ë˜ë©°, "2022-11 ì¼ì§€" ë“±ìœ¼ë¡œ ì“´ë‹¤.
`Short Desc` ì„¤ëª…ì€ "ì‘ì„±ì¤‘" ë˜ëŠ” ê°„ë‹¨í•œ ì„¤ëª…ì„ ì“´ë‹¤.
`Path` íŒŒì¼ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ê²ƒì¸ë°, ì•ŒíŒŒë²³ìœ¼ë¡œ ì •í•´ì•¼ í•œë‹¤.
ì²˜ìŒì—ëŠ” "home" ìœ¼ë¡œ ê³ ì •ë¼ ìˆë‹¤.
`v ok` ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ í™ˆ í˜ì´ì§€ì˜ ì¡°ê±´ ì‘ì„±ì„ ëë‚¸ë‹¤.
ì²˜ìŒ ì‘ì„±í•œ í™”ë©´ì€ Path ê°€ /home ìœ¼ë¡œ ë˜ì–´ ìˆì–´ì„œ
`localhost:í¬íŠ¸ë²ˆí˜¸/en/home` ìœ¼ë¡œ ì§€ì •ì´ ëœë‹¤.

# rclone ìœ¼ë¡œ êµ¬ê¸€ ë“œë¼ì´ë¸Œ ì‚¬ìš©í•˜ê¸°

1. êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ Fedora ì—ì„œ ì“°ê¸° ìœ„í•´ì„œëŠ” google drive ë¥¼ ì—°ê²°í•˜ëŠ” ì´ë¦„ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
```
rclone config #-- (1) êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ fedora ì—ì„œ ì“°ê¸° ìœ„í•œ ì„¤ì •ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.
```

2. í™”ë©´ì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ì— í•„ìš”í•œ ëª…ë ¹ì–´ê°€ ë‚˜íƒ€ë‚œë‹¤.
```
No remotes found - make a new one
n) New remote
s) Set configuration password
q) Quit config
n/s/q>
```
3 `n` ì„ ì…ë ¥í•´ì„œ ìƒˆë¡œìš´ ì›ê²©ì¥ì†Œ (ë¦¬ëª¨íŠ¸) ë§Œë“¤ê¸°ë¥¼ ì‹œì‘í•œë‹¤.
```
n/s/q> n
      === (ìƒˆë¡œìš´ ë¦¬ëª¨íŠ¸ ë§Œë“¤ê¸°)
name>
```
4. êµ¬ê¸€ ë“œë¼ì´ë¸ŒëŠ” êµ¬ê¸€ `ì´ë©”ì¼ ê³„ì • í•˜ë‚˜ë‹¹ 1ê°œë§Œ` ì§€ì •ëœë‹¤. ê·¸ ë“œë¼ì´ë¸Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ë¦¬ëª¨íŠ¸ì˜ ì´ë¦„ì„ ì…ë ¥í•œë‹¤.
```
name> abcdefg
     ========= (rclone ì‚¬ìš©í•  ì´ë¦„. ì•ìœ¼ë¡œ ì´ ì´ë¦„ìœ¼ë¡œ ì—°ê²°í•˜ê²Œ ëœë‹¤.)
Option Storage.
Type of storage to configure.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value.
...
Storage>
```
5. `rclone` í”„ë¡œê·¸ë¨ì€ êµ¬ê¸€ ë“œë¼ì´ë¸Œ ë¿ ì•„ë‹ˆë¼ ë‹¤ë¥¸ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ë„ ì—°ê²°í• ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì–´ëŠ í´ë¼ìš°ë“œë¥¼  ì“¸ ê²ƒì¸ì§€ ì„ íƒí•´ì•¼ í•œë‹¤. ì—¬ê¸°ì„œëŠ” êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ ì„ íƒí•œë‹¤.
ë‚˜ì—´ë˜ëŠ” ìˆ«ìë¥¼ ì…ë ¥í•´ë„ ë˜ê³ , ë¬¸ìë¥¼ ì…ë ¥í•´ë„ ëœë‹¤. ì—¬ê¸°ì„œëŠ” êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ ê°€ë¦¬í‚¤ëŠ” `drive` ë¥¼ ì…ë ¥í–ˆë‹¤.
```
Choose a number from below, or type in your own value.
...
16 / Google Drive
   \ "drive"
...
(ìŠ¤í† ë¦¬ì§€ ì¢…ë¥˜ê°€ 45ê°œë¡œ ìƒë‹¹íˆ ë§ë‹¤.)
...
Storage> drive
        ======= (Google Drive ë¡œ ì§€ì •)
Option client_id.
Google Application Client Id
Setting your own is recommended.
...
client_id> 
```
6. `client_id` ëŠ” ê¸°ë³¸ ê°’ìœ¼ë¡œ í•˜ê¸° ìœ„í•´ ê·¸ëƒ¥ ```ì—”í„°```ë¥¼ ì¹œë‹¤.
```
client_id> 
          ---
Option client_secret.
OAuth Client Secret.
client_secret> 
              ---
Option scope.
Scope that rclone should use when requesting access from drive.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value.
 1 / Full access all files, excluding Application Data Folder.
...
scope>
```

7. scope ëŠ” `1` ë¡œ ì§€ì •í•œë‹¤.
```
scope> 1
      === (ì§€ì •)
root_folder_id> 
```

8. ì´í›„ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ ì§€ì •í•˜ê¸° ìœ„í•´ ê·¸ëƒ¥ `ì—”í„°`ë¥¼ ì¹œë‹¤.
```
Option root_folder_id.
ID of the root folder.
root_folder_id> 
               ---
Option service_account_file.
Service Account Credentials JSON file path.
service_account_file> 
                     ---
Edit advanced config?
y/n> 
    ---
Use auto config?
y/n> 
    --- (ë¸Œë¼ìš°ì €ê°€ ëœ¨ë©´,)
```

9. `auto config` ë‹¤ìŒì—ëŠ” í”„ë¡œê·¸ë¨ì´ ë¸Œë¼ìš°ì €ë¥¼ ë„ì›Œì„œ ë³¸ì¸ í™•ì¸ì„ í•œë‹¤.
Google ê³„ì •ìœ¼ë¡œ `ë¡œê·¸ì¸` >
`ê³„ì •ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  í•©ë‹ˆë‹¤` > emails `ì£¼ì†Œ` í™•ì¸í›„ [`ì·¨ì†Œ`] [`í—ˆìš©`] ì„ íƒ.
ëë‚´ë©´ ëœë‹¤)
```
Use auto config?
y/n> 
    ---
Configure this as a Shared Drive (Team Drive)?
y/n> 
    ---
y/e/d> 
      ---
Current remotes:

Name                 Type
====                 ====
abcdefg              drive
```

10. ë¦¬ëª¨íŠ¸ ì´ë¦„ì´ ìœ„ì™€ ê°™ì´ ë“±ë¡ë˜ì—ˆë¯€ë¯€ë¡œ ì´ ì‘ì—…ì„ ëë‚¸ë‹¤.
```
e/n/d/r/c/s/q> q
              ===
```

# wiki.js ë‹¨ìˆœë°±ì—… ë³´ê´€í•˜ê¸°

```
DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
#-
sudo docker ps -a ; sudo docker stop wikijs ; echo "#-- (1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
LOCAL_FOLDER="/home/backup/simple_wikidb" #- ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ
if [ ! -d ${LOCAL_FOLDER} ]; then
    sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER}
fi
this_y4m2=$(date +%Y)-$(date +%m) #- 2022-08
LOCAL_Y2M2=${LOCAL_FOLDER}/${this_y4m2}
if [ ! -d ${LOCAL_Y2M2} ]; then
    mkdir -p ${LOCAL_Y2M2} ; echo "#-- (2) ${LOCAL_Y2M2} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
ls -lR ${LOCAL_Y2M2} ; echo "#-- (3) ë³´ê´€ìš© ë¡œì»¬ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
REMOTE_FOLDER="simple_wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
REMOTE_Y2M2=${REMOTE_FOLDER}/${this_y4m2}
#-
ymd_hm=$(date +"%y%m%d%a-%H%M")
DB_sql7z=${DB_NAME}_${ymd_hm}_$(uname -n).sql.7z #- ì••ì¶•íŒŒì¼ ì´ë¦„
cat <<__EOF__
#-
#- DB ë°±ì—…
#-
#- (4) wili.js ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ---ë¹„ë°€ë²ˆí˜¸--- ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-
__EOF__
sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_Y2M2}/${DB_sql7z} -p ; echo "#-- (5) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ ë¡œì»¬ ë³´ê´€ì¥ì†Œì— ë°±ì—…í•©ë‹ˆë‹¤."
ls -lR ${LOCAL_Y2M2} ; echo "#-- (6) ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_Y2M2}/${DB_sql7z} ${RCLONE_NAME}:${REMOTE_Y2M2}/ ; echo "#-- (7) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ íŒŒì¼ì„ í´ë¼ìš°ë“œë¡œ ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_Y2M2} ; echo "#-- (8) í´ë¼ìš°ë“œ í´ë”ì…ë‹ˆë‹¤."
#-
sudo docker start wikijs ; sudo docker ps -a ; echo "#-- (9) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."
```

# wiki.js í´ë¼ìš°ë“œì— ë°±ì—…í•˜ê¸°

```
sudo docker ps -a ; sudo docker stop wikijs ; echo "#-- (1-1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
#-
DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
LOCAL_FOLDER="/home/backup/wikidb" #- ë°±ì—…íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë¡œì»¬ ì €ì¥ì†Œì˜ ë””ë ‰í† ë¦¬ ì´ë¦„
REMOTE_FOLDER="wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
#-
this_year=$(date +%Y) #- 2022
this_wol=$(date +%m) #- 07
ymd_hm=$(date +"%y%m%d%a-%H%M")
pswd_ym=$(date +"%y%m")
yoil_number0to6=$(date +%u) #- ì¼0 ì›”1 í™”2 ìˆ˜3 ëª©4 ê¸ˆ5 í† 6
yoil_number1to7=$(( ${yoil_number0to6} + 1 )) #- 1 2 3 4 5 6 7
ju_beonho=$(date +%V) #- 1ë…„ì¤‘ ëª‡ë²ˆì§¸ ì£¼ì¸ì§€ í‘œì‹œ.
#- V: ì›”ìš”ì¼ë§ˆë‹¤ í•˜ë‚˜ì”© ì¦ê°€í•œë‹¤.
#- U: (1ì›”1ì¼ì´ ì¼ìš”ì¼ ì´ë©´ 01, ì•„ë‹ˆë©´ 00), ì¼ìš”ì¼ë§ˆë‹¤ í•˜ë‚˜ì”© ì¦ê°€í•œë‹¤.
#-
yoil_sql_7z=".${yoil_number1to7}yoil.sql.7z" #- ìš”ì¼ í‘œì‹œ
uname_n=$(uname -n)
YOIL_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${yoil_sql_7z}
this_wol_sql_7z=".${this_wol}wol.sql.7z" #- ì›” í‘œì‹œ
WOL_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${this_wol_sql_7z}
ju_beonho_sql_7z=".${ju_beonho}ju.sql.7z" #- 1ë…„ì¤‘ ëª‡ë²ˆì§¸ ì£¼ì¸ì§€ í‘œì‹œ
JU_sql7z=${DB_NAME}_${ymd_hm}_${uname_n}${ju_beonho_sql_7z}
#-
if [ ! -d ${LOCAL_FOLDER} ];then
	sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER} ; echo "#-- (1-2) ë§¤ì›” ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_FOLDER} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
LOCAL_THIS_YEAR=${LOCAL_FOLDER}/${this_year}
LOCAL_YOIL=${LOCAL_THIS_YEAR}/1_7yoil
if [ ! -d ${LOCAL_YOIL} ]; then
	mkdir -p ${LOCAL_YOIL} ; echo "#-- (1-3) ìµœê·¼ 1ì£¼ì¼ì¹˜ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_YOIL} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
LOCAL_JU=${LOCAL_THIS_YEAR}/01_53ju #- ë…„ë„ì˜ ju í´ë”ì—ëŠ” ë§¤ì£¼ ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•œë‹¤.
if [ ! -d ${LOCAL_JU} ]; then
	mkdir -p ${LOCAL_JU} ; echo "#-- (1-4) ë§¤ì£¼ ë§ˆì§€ë§‰ ë°±ì—… 1ê°œì”©ë§Œ ë³´ê´€í•˜ëŠ” ${LOCAL_JU} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
#-
REMOTE_YEAR=${REMOTE_FOLDER}/${this_year} #- rclone ëª…ë ¹ìœ¼ë¡œ ë³´ë‚´ëŠ” ì›ê²© ì €ì¥ì†Œì˜ ë°ì´í„°ë² ì´ìŠ¤êµ¬ë¶„/ë…„ë„
REMOTE_YOIL=${REMOTE_YEAR}/1_7yoil #- ìµœê·¼ ìš”ì¼
REMOTE_JU=${REMOTE_YEAR}/01_53ju #- ì£¼ ì¼ë ¨ë²ˆí˜¸
ls -lR ${LOCAL_THIS_YEAR} ; echo "#-- (1-5) ${LOCAL_THIS_YEAR} ë³´ê´€ìš© --ë¡œì»¬-- ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
rm -f ${LOCAL_YOIL}/*${yoil_sql_7z} ; echo "#-- (1-6) < ${yoil_sql_7z} > ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
#-
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YOIL}/ | grep ${yoil_sql_7z} | awk '{print $2}') #- < ${yoil_sql_7z} > ì´ë¦„ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST" #- < ${yoil_sql_7z} > ì´ë¦„ì˜ í´ë¼ìš°ë“œ ë°±ì—…íŒŒì¼ì´ ìˆëŠ” ê²½ìš°,
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ // https://linuxhint.com/trim_string_bash/
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_YOIL}/${file_name} ; echo "#-- (1-7) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- DB ë¥¼ < ${yoil_sql_7z} > ì´ë¦„ìœ¼ë¡œ ì••ì¶•.
#-
#-- (1-8) wili.js ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ---ë¹„ë°€ë²ˆí˜¸--- ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
#-
__EOF__
sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_YOIL}/${YOIL_sql7z} -p ; echo "#-- (1-9) < ${yoil_sql_7z} > ì´ë¦„ì˜ --ë¡œì»¬-- ì— ì••ì¶•ë³´ê´€ í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_YOIL}/${YOIL_sql7z} ${RCLONE_NAME}:${REMOTE_YOIL}/ ; echo "#-- (1-10) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YOIL} ; echo "#-- (1-11) < ${yoil_sql_7z} > ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
cat <<__EOF__
#-
#- ::${this_wol_sql_7z}:: ì§€ë‚œë°±ì—… ì‚­ì œ
#-
__EOF__
rm -f ${LOCAL_THIS_YEAR}/*${this_wol_sql_7z} ; echo "#-- (1-12) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YEAR}/ | grep ${this_wol_sql_7z} | awk '{print $2}') #- ::${this_wol_sql_7z}:: ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST"
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_YEAR}/${file_name} ; echo "#-- (1-13) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- ::${this_wol_sql_7z}:: ìœ¼ë¡œ ë³µì‚¬
#-
__EOF__
cp ${LOCAL_YOIL}/${YOIL_sql7z} ${LOCAL_THIS_YEAR}/${WOL_sql7z} ; echo "#-- (1-14) < ${yoil_sql_7z} > ì´ë¦„ì˜ íŒŒì¼ì„ ::${this_wol_sql_7z}:: ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ë¡œì»¬ì˜ ë…„ë„í´ë”ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_THIS_YEAR}/${WOL_sql7z} ${RCLONE_NAME}:${REMOTE_YEAR}/ ; echo "#-- (1-15) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_YEAR} ; echo "#-- (1-16) ::${this_wol_sql_7z}:: ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
cat <<__EOF__
#-
#- ( ${ju_beonho_sql_7z} ) ì´ë¦„ìœ¼ë¡œ ëœ ì§€ë‚œë°±ì—… ì‚­ì œ
#-
__EOF__
rm -f ${LOCAL_JU}/*${ju_beonho_sql_7z} ; echo "#-- (1-17) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ --ë¡œì»¬-- ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
REMOTE_SQL_7Z_LIST=$(/usr/bin/rclone ls ${RCLONE_NAME}:${REMOTE_JU}/ | grep ${ju_beonho_sql_7z} | awk '{print \$2}') #- ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ë°±ì—…íŒŒì¼ì´ í´ë¼ìš°ë“œì— ìˆëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
if [ "x$REMOTE_SQL_7Z_LIST" != "x" ]; then
	mapfile -t Remote_Sql7z_Array <<< "$REMOTE_SQL_7Z_LIST"
	for val in "${Remote_Sql7z_Array[@]}"
	do
		file_name=$(echo ${val} | sed 's/ *$//g') #- ë¹ˆì¹¸ ì‚­ì œ
		/usr/bin/rclone deletefile ${RCLONE_NAME}:${REMOTE_JU}/${file_name} ; echo "#-- (1-18) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì§€ë‚œë°±ì—… ì„ ì‚­ì œí•©ë‹ˆë‹¤."
	done
fi
cat <<__EOF__
#-
#- ì˜¤ëŠ˜ì˜ ${ju_beonho_sql_7z} ì´ë¦„ìœ¼ë¡œ ë³µì‚¬
#-
__EOF__
cp ${LOCAL_YOIL}/${YOIL_sql7z} ${LOCAL_JU}/${JU_sql7z} ; echo "#-- (1-19) < ${yoil_sql_7z} > ì´ë¦„ì˜ íŒŒì¼ì„ ( ${ju_beonho_sql_7z} ) ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ë¡œì»¬ì˜ ( ${ju_beonho_sql_7z} ) í´ë”ì— ë³µì‚¬í•©ë‹ˆë‹¤."
/usr/bin/rclone copy ${LOCAL_JU}/${JU_sql7z} ${RCLONE_NAME}:${REMOTE_JU}/) ; echo "#-- (1-20) ( ${ju_beonho_sql_7z} ) ì´ë¦„ì˜ ==í´ë¼ìš°ë“œ== ì— ë³µì‚¬í•©ë‹ˆë‹¤."
#-
ls -lR ${LOCAL_THIS_YEAR} ; echo "#-- (1-21) ${LOCAL_THIS_YEAR} ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_YEAR} ; echo "#-- (1-22) ==í´ë¼ìš°ë“œ== ë°±ì—… ë‚´ì—­ì…ë‹ˆë‹¤."
#-
sudo docker start wikijs ; sudo docker ps -a ; echo "#-- (1-23) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."
```

# ì„œë²„ìš© simple_wiki.js-BACKUP.sh ìŠ¤í¬ë¦½íŠ¸.
```
#!/bin/sh

source ${HOME}/bin/color_base #-- 221027ëª©-1257 CMD_DIR CMD_NAME cmdRun cmdCont cmdYenter echoSeq 
MEMO="wiki.js ë°ì´í„°ë¥¼ google drive ì— ë°±ì—…"
cat <<__EOF__
${cMagenta}>>>>>>>>>>${cGreen} $0 ${cMagenta}||| ${cCyan}${MEMO} ${cMagenta}>>>>>>>>>>${cReset}
__EOF__
zz00logs_folder="${HOME}/zz00logs" ; if [ ! -d "${zz00logs_folder}" ]; then cmdRun "mkdir ${zz00logs_folder}" "ë¡œê·¸ í´ë”" ; fi
zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")__RUNNING_${CMD_NAME}" ; touch ${zz00log_name}
# ----


DB_NAME="wiki" #- ë°±ì—…í•  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
#-
cmdRun "sudo docker ps -a ; sudo docker stop wikijs" "(1) ìœ„í‚¤ ë„ì»¤ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤."
LOCAL_FOLDER="/home/backup/simple_wikidb" #- ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ
if [ ! -d ${LOCAL_FOLDER} ]; then
	cmdRun "sudo mkdir -p ${LOCAL_FOLDER} ; sudo chown ${USER}:${USER} ${LOCAL_FOLDER}" "(2) ë³´ê´€ìš© ë¡œì»¬ ì €ì¥ì†Œ í´ë”ë¥¼ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤."
fi
this_y4m2=$(date +%Y)-$(date +%m) #- 2022-08
LOCAL_Y2M2=${LOCAL_FOLDER}/${this_y4m2}
if [ ! -d ${LOCAL_Y2M2} ]; then
    cmdRun "mkdir -p ${LOCAL_Y2M2}" "(3) ${LOCAL_Y2M2} ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤."
fi
cmdRun "ls -lR ${LOCAL_Y2M2}" "(4) ë³´ê´€ìš© ë¡œì»¬ ë””ë ‰í† ë¦¬ ì…ë‹ˆë‹¤."
#-
REMOTE_FOLDER="simple_wiki.js" #- ì›ê²© ì €ì¥ì†Œì˜ ì²«ë²ˆì§¸ í´ë” ì´ë¦„
RCLONE_NAME="yosjgc" #- rclone ì´ë¦„
REMOTE_Y2M2=${REMOTE_FOLDER}/${this_y4m2}
#-
ymd_hm=$(date +"%y%m%d%a-%H%M")
DB_sql7z=${DB_NAME}_${ymd_hm}_$(uname -n).sql.7z #- ì••ì¶•íŒŒì¼ ì´ë¦„
cat <<__EOF__
${cMagenta}
#- DB ë°±ì—…

#- ${cRed}${DB_sql7z} ${cMagenta}ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ${cRed}----${cYellow}ë¹„ë°€ë²ˆí˜¸${cRed}----${cMagenta} ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
${cReset}
__EOF__
cmdRun "sudo docker exec wikijsdb pg_dumpall -U wikijs | 7za a -si ${LOCAL_Y2M2}/${DB_sql7z} -p" "(5) ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì— ${cRed}----${cYellow}ë¹„ë°€ë²ˆí˜¸${cRed}----${cCyan} ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
cmdRun "ls -lR ${LOCAL_Y2M2}" "(6) ë³´ê´€ìš© ë¡œì»¬ í´ë”ì…ë‹ˆë‹¤."
cmdRun "/usr/bin/rclone copy ${LOCAL_Y2M2}/${DB_sql7z} ${RCLONE_NAME}:${REMOTE_Y2M2}/" "(7) ì˜¤ëŠ˜ ìš”ì¼ì´ë¦„ì˜ íŒŒì¼ì„ í´ë¼ìš°ë“œë¡œ ë³µì‚¬í•©ë‹ˆë‹¤."
cmdRun "/usr/bin/rclone lsl ${RCLONE_NAME}:${REMOTE_Y2M2}" "(8) í´ë¼ìš°ë“œ í´ë”ì…ë‹ˆë‹¤."
#-
cmdRun "sudo docker start wikijs ; sudo docker ps -a" "(9) ìœ„í‚¤ ë„ì»¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤."


# ----
rm -f ${zz00log_name} ; zz00log_name="${zz00logs_folder}/zz.$(date +"%y%m%d%a-%H%M%S")..${CMD_NAME}" ; touch ${zz00log_name}
ls --color ${zz00logs_folder}
cat <<__EOF__
${cRed}<<<<<<<<<<${cBlue} $0 ${cRed}||| ${cMagenta}${MEMO} ${cRed}<<<<<<<<<<${cReset}
__EOF__
```

